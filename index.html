<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Required Safety Training</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 980px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.5;
      background: #f9f9f9;
    }

    h1 {
      text-align: center;
      margin: 10px 0 20px;
    }

    .lang-switcher {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-bottom: 15px;
    }

    .lang-btn {
      padding: 6px 14px;
      font-size: 0.9rem;
      border-radius: 5px;
      border: 1px solid #007bff;
      background: #e8f1ff;
      cursor: pointer;
      font-weight: 600;
    }

    .lang-btn.active {
      background: #007bff;
      color: #fff;
    }

    .video-container {
      margin-top: 20px;
    }

    video {
      width: 100%;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    #ackSection {
      display: none;
      margin-top: 20px;
      background: #eef2f5;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #cdd3d8;
      font-size: 1.05rem;
    }

    #ackLabel input {
      transform: scale(1.2);
      margin-right: 10px;
    }

    #continueSection {
      display: none;
      margin-top: 20px;
      text-align: center;
    }

    #continueBtn {
      font-size: 1.2rem;
      padding: 12px 24px;
      background: #007acc;
      color: #fff;
      border-radius: 6px;
      text-decoration: none;
      display: inline-block;
      font-weight: bold;
    }

    #continueBtn:hover {
      background: #005fa3;
    }
  </style>
</head>

<body>

  <!-- Language Toggle -->
  <div class="lang-switcher">
    <button id="enBtn" class="lang-btn active">English</button>
    <button id="esBtn" class="lang-btn">Español</button>
  </div>

  <!-- Page Title -->
  <h1 id="page-title">Required Safety Training Video</h1>

  <!-- Training Video -->
  <div class="video-container">
    <video id="trainingVideo" controls>
      <source src="OSHA_Training_Video.mp4" type="video/mp4">
      Your browser does not support MP4 playback.
    </video>
  </div>

  <!-- Acknowledgment Section (hidden until video ends) -->
  <div id="ackSection">
    <label id="ackLabel">
      <input type="checkbox" id="ackCheckbox">
      I confirm that I have watched the entire safety training video. I acknowledge this video is only part of my training. Additional safety rules and procedures are covered in the written training materials provided, which I have been trained on.
    </label>
  </div>

  <!-- Continue Button (hidden until checkbox is checked) -->
  <div id="continueSection">
    <a id="continueBtn" href="training_application.html">Continue to Training Application →</a>
  </div>

  <!-- SCRIPT -->
  <script>
    // --------------------------------------------------
    // DISABLE SCRUBBING / SEEKING (NO SKIPPING AHEAD)
    // --------------------------------------------------
    const video = document.getElementById('trainingVideo');
    let lastAllowedTime = 0;

    video.addEventListener('timeupdate', function () {
      if (video.currentTime > lastAllowedTime + 0.35) {
        video.currentTime = lastAllowedTime;
      } else {
        lastAllowedTime = video.currentTime;
      }
    });

    video.addEventListener('seeking', function () {
      if (video.currentTime > lastAllowedTime) {
        video.currentTime = lastAllowedTime;
      }
    });

    // --------------------------------------------------
    // SHOW ACK CHECKBOX AFTER VIDEO ENDS
    // --------------------------------------------------
    video.addEventListener('ended', function () {
      document.getElementById('ackSection').style.display = 'block';
    });

    // --------------------------------------------------
    // CONTINUE BUTTON AFTER CHECKBOX CLICKED
    // --------------------------------------------------
    function bindCheckbox() {
      const checkbox = document.getElementById('ackCheckbox');
      checkbox.addEventListener('change', function () {
        const continueSection = document.getElementById('continueSection');
        if (checkbox.checked) {
          continueSection.style.display = 'block';
        } else {
          continueSection.style.display = 'none';
        }
      });
    }
    bindCheckbox();

    // --------------------------------------------------
    // ENGLISH / SPANISH LANGUAGE TOGGLE
    // --------------------------------------------------
    const enText = {
      title: "Required Safety Training Video",
      ack: "I confirm that I have watched the entire safety training video. I acknowledge this video is only part of my training. Additional safety rules and procedures are covered in the written training materials provided, which I have been trained on.",
      continue: "Continue to Training Application →"
    };

    const esText = {
      title: "Video Obligatorio de Capacitación de Seguridad",
      ack: "Confirmo que he visto el video completo de capacitación de seguridad. Reconozco que este video es solo una parte de mi capacitación. Reglas y procedimientos de seguridad adicionales están incluidos en los materiales escritos que he recibido y en los cuales he sido capacitado.",
      continue: "Continuar a la Solicitud de Capacitación →"
    };

    document.getElementById('enBtn').addEventListener('click', function () {
      this.classList.add('active');
      document.getElementById('esBtn').classList.remove('active');

      document.getElementById('page-title').innerText = enText.title;
      document.getElementById('ackLabel').innerHTML =
        '<input type="checkbox" id="ackCheckbox"> ' + enText.ack;

      bindCheckbox();
      document.getElementById('continueBtn').innerText = enText.continue;
    });

    document.getElementById('esBtn').addEventListener('click', function () {
      this.classList.add('active');
      document.getElementById('enBtn').classList.remove('active');

      document.getElementById('page-title').innerText = esText.title;
      document.getElementById('ackLabel').innerHTML =
        '<input type="checkbox" id="ackCheckbox"> ' + esText.ack;

      bindCheckbox();
      document.getElementById('continueBtn').innerText = esText.continue;
    });
  </script>

</body>
</html>
